import { useRef } from "react";
import { gsap } from "gsap";
import { useGSAP } from "@gsap/react";

gsap.registerPlugin(useGSAP);

const AnimatedTitle = () => {
  const svgRef = useRef<SVGSVGElement>(null);

  useGSAP(
    () => {
      const paths = gsap.utils.toArray<SVGPathElement>(".letter-path");

      // Inicializa cada path oculto y listo para animación
      paths.forEach((path) => {
        const length = path.getTotalLength();
        path.style.strokeDasharray = length.toString();
        path.style.strokeDashoffset = length.toString();
      });

      // Crea una animación en la que cada path se revela y dibuja aleatoriamente
      gsap.to(paths, {
        strokeDashoffset: 0,
        opacity: 1,
        duration: 2,
        ease: "power2.out",
        stagger: {
          each: 0.25,
          from: "random", // animación aleatoria
        },
      });
    },
    { scope: svgRef },
  );

  return (
    <svg
      ref={svgRef}
      viewBox="0 0 500 100"
      width="clamp(15rem,40dvw,50rem)"
      height="auto"
    >
      {/* Asegúrate que cada trazo tenga la clase `letter-path` */}
      <g
        id="svgGroup"
        strokeLinecap="round"
        fillRule="evenodd"
        fontSize="9pt"
        stroke="white"
        strokeWidth="2"
        fill="white"
      >
        <path
          d="M 3.457 60.402 Q 0 52.353 0 43.507 Q 0 34.661 3.457 26.612 Q 6.913 18.563 12.738 12.739 Q 18.563 6.914 26.611 3.457 Q 34.66 0.001 43.506 0.001 Q 52.352 0.001 60.401 3.457 Q 68.449 6.914 74.274 12.739 Q 80.099 18.563 83.556 26.612 Q 87.012 34.661 87.012 43.507 Q 87.012 52.353 83.556 60.402 Q 80.099 68.45 74.274 74.275 Q 68.449 80.1 60.401 83.556 Q 52.352 87.013 43.506 87.013 Q 34.66 87.013 26.611 83.556 Q 18.563 80.1 12.738 74.275 Q 6.913 68.45 3.457 60.402 Z M 6.647 27.966 Q 3.481 35.386 3.481 43.507 Q 3.481 51.628 6.647 59.048 Q 9.813 66.468 15.179 71.834 Q 20.545 77.2 27.965 80.366 Q 35.385 83.532 43.506 83.532 Q 51.627 83.532 59.047 80.366 Q 66.467 77.2 71.833 71.834 Q 77.199 66.468 80.365 59.048 Q 83.531 51.628 83.531 43.507 Q 83.531 35.386 80.365 27.966 Q 77.199 20.545 71.833 15.18 Q 66.467 9.814 59.047 6.648 Q 51.627 3.481 43.506 3.481 Q 35.385 3.481 27.965 6.648 Q 20.545 9.814 15.179 15.18 Q 9.813 20.545 6.647 27.966 Z M 11.868 61.828 Q 6.961 53.416 6.961 43.507 Q 6.961 33.597 11.868 25.186 Q 16.774 16.775 25.185 11.868 Q 33.596 6.962 43.506 6.962 Q 53.416 6.962 61.827 11.868 Q 70.238 16.775 75.144 25.186 Q 80.051 33.597 80.051 43.507 Q 80.051 53.416 75.144 61.828 Q 70.238 70.239 61.827 75.145 Q 53.416 80.052 43.506 80.052 Q 33.596 80.052 25.185 75.145 Q 16.774 70.239 11.868 61.828 Z M 13.052 30.648 Q 10.442 36.788 10.442 43.507 Q 10.442 50.226 13.052 56.365 Q 15.662 62.504 20.085 66.927 Q 24.509 71.351 30.648 73.961 Q 36.787 76.571 43.506 76.571 Q 50.225 76.571 56.364 73.961 Q 62.504 71.351 66.927 66.927 Q 71.35 62.504 73.96 56.365 Q 76.571 50.226 76.571 43.507 Q 76.571 36.788 73.96 30.648 Q 71.35 24.509 66.927 20.086 Q 62.504 15.663 56.364 13.053 Q 50.225 10.442 43.506 10.442 Q 36.787 10.442 30.648 13.053 Q 24.509 15.663 20.085 20.086 Q 15.662 24.509 13.052 30.648 Z M 17.886 58.347 Q 13.922 51.531 13.922 43.507 Q 13.922 35.482 17.886 28.666 Q 21.85 21.851 28.666 17.887 Q 35.482 13.923 43.506 13.923 Q 51.53 13.923 58.346 17.887 Q 65.162 21.851 69.126 28.666 Q 73.09 35.482 73.09 43.507 Q 73.09 51.531 69.126 58.347 Q 65.162 65.163 58.346 69.127 Q 51.53 73.091 43.506 73.091 Q 35.482 73.091 28.666 69.127 Q 21.85 65.163 17.886 58.347 Z M 20.907 30.407 Q 17.403 36.401 17.403 43.507 Q 17.403 50.613 20.907 56.607 Q 24.412 62.601 30.406 66.106 Q 36.4 69.61 43.506 69.61 Q 50.612 69.61 56.606 66.106 Q 62.6 62.601 66.105 56.607 Q 69.61 50.613 69.61 43.507 Q 69.61 36.401 66.105 30.407 Q 62.6 24.413 56.606 20.908 Q 50.612 17.403 43.506 17.403 Q 36.4 17.403 30.406 20.908 Q 24.412 24.413 20.907 30.407 Z M 22.672 52.281 Q 20.883 48.099 20.883 43.507 Q 20.883 38.915 22.672 34.733 Q 24.46 30.552 27.506 27.506 Q 30.551 24.461 34.732 22.672 Q 38.914 20.884 43.506 20.884 Q 48.098 20.884 52.28 22.672 Q 56.461 24.461 59.507 27.506 Q 62.552 30.552 64.341 34.733 Q 66.129 38.915 66.129 43.507 Q 66.129 48.099 64.341 52.281 Q 62.552 56.462 59.507 59.507 Q 56.461 62.553 52.28 64.341 Q 48.098 66.13 43.506 66.13 Q 38.914 66.13 34.732 64.341 Q 30.551 62.553 27.506 59.507 Q 24.46 56.462 22.672 52.281 Z M 29.971 29.972 Q 24.363 35.579 24.363 43.507 Q 24.363 51.435 29.971 57.042 Q 35.578 62.649 43.506 62.649 Q 51.434 62.649 57.041 57.042 Q 62.649 51.435 62.649 43.507 Q 62.649 35.579 57.041 29.972 Q 51.434 24.364 43.506 24.364 Q 35.578 24.364 29.971 29.972 Z"
          id="0"
          className="letter-path"
          vectorEffect="non-scaling-stroke"
        />
        <path
          d="M 171.897 19.047 L 168.996 20.932 Q 163.486 12.859 154.76 8.17 Q 146.035 3.481 135.932 3.481 Q 127.811 3.481 120.391 6.648 Q 112.97 9.814 107.605 15.18 Q 102.239 20.545 99.073 27.966 Q 95.906 35.386 95.906 43.507 Q 95.906 51.628 99.073 59.048 Q 102.239 66.468 107.605 71.834 Q 112.97 77.2 120.391 80.366 Q 127.811 83.532 135.932 83.532 Q 146.035 83.532 154.784 78.795 Q 163.534 74.058 169.045 65.985 L 171.848 68.112 Q 165.854 76.813 156.38 81.913 Q 146.905 87.013 135.932 87.013 Q 127.086 87.013 119.037 83.556 Q 110.988 80.1 105.164 74.275 Q 99.339 68.45 95.882 60.402 Q 92.426 52.353 92.426 43.507 Q 92.426 34.661 95.882 26.612 Q 99.339 18.563 105.164 12.739 Q 110.988 6.914 119.037 3.457 Q 127.086 0.001 135.932 0.001 Q 146.953 0.001 156.428 5.125 Q 165.903 10.249 171.897 19.047 Z M 166.193 23.011 L 163.292 24.896 Q 158.748 18.225 151.521 14.334 Q 144.295 10.442 135.932 10.442 Q 129.213 10.442 123.073 13.053 Q 116.934 15.663 112.511 20.086 Q 108.088 24.509 105.478 30.648 Q 102.867 36.788 102.867 43.507 Q 102.867 50.226 105.478 56.365 Q 108.088 62.504 112.511 66.927 Q 116.934 71.351 123.073 73.961 Q 129.213 76.571 135.932 76.571 Q 144.343 76.571 151.546 72.656 Q 158.748 68.74 163.292 62.069 L 166.096 64.148 Q 161.069 71.496 153.117 75.774 Q 145.165 80.052 135.932 80.052 Q 126.022 80.052 117.611 75.145 Q 109.2 70.239 104.293 61.828 Q 99.387 53.416 99.387 43.507 Q 99.387 33.597 104.293 25.186 Q 109.2 16.775 117.611 11.868 Q 126.022 6.962 135.932 6.962 Q 145.213 6.962 153.189 11.288 Q 161.165 15.615 166.193 23.011 Z M 160.392 26.878 L 157.491 28.763 Q 153.914 23.542 148.234 20.473 Q 142.554 17.403 135.932 17.403 Q 128.826 17.403 122.832 20.908 Q 116.838 24.413 113.333 30.407 Q 109.828 36.401 109.828 43.507 Q 109.828 50.613 113.333 56.607 Q 116.838 62.601 122.832 66.106 Q 128.826 69.61 135.932 69.61 Q 142.554 69.61 148.259 66.517 Q 153.963 63.423 157.54 58.154 L 160.392 60.136 Q 156.331 66.13 149.878 69.61 Q 143.425 73.091 135.932 73.091 Q 127.907 73.091 121.092 69.127 Q 114.276 65.163 110.312 58.347 Q 106.348 51.531 106.348 43.507 Q 106.348 35.482 110.312 28.666 Q 114.276 21.851 121.092 17.887 Q 127.907 13.923 135.932 13.923 Q 143.425 13.923 149.878 17.403 Q 156.331 20.884 160.392 26.878 Z M 154.639 30.842 L 151.787 32.727 Q 149.177 28.86 144.996 26.612 Q 140.814 24.364 135.932 24.364 Q 128.004 24.364 122.397 29.972 Q 116.789 35.579 116.789 43.507 Q 116.789 51.435 122.397 57.042 Q 128.004 62.649 135.932 62.649 Q 140.814 62.649 144.996 60.377 Q 149.177 58.105 151.787 54.238 L 154.591 56.269 Q 151.497 60.812 146.567 63.471 Q 141.636 66.13 135.932 66.13 Q 131.34 66.13 127.158 64.341 Q 122.977 62.553 119.931 59.507 Q 116.886 56.462 115.097 52.281 Q 113.309 48.099 113.309 43.507 Q 113.309 38.915 115.097 34.733 Q 116.886 30.552 119.931 27.506 Q 122.977 24.461 127.158 22.672 Q 131.34 20.884 135.932 20.884 Q 141.684 20.884 146.615 23.567 Q 151.546 26.249 154.639 30.842 Z"
          id="1"
          className="letter-path"
          vectorEffect="non-scaling-stroke"
        />
        <path
          d="M 209.215 8.17 L 179.438 83.532 L 175.667 83.532 L 207.33 3.481 L 211.1 3.481 L 242.715 83.532 L 238.992 83.532 L 209.215 8.17 Z M 233.53 3.481 L 265.193 83.532 L 261.422 83.532 L 229.808 3.481 L 233.53 3.481 Z M 214.822 3.481 L 218.545 3.481 L 250.207 83.532 L 246.437 83.532 L 214.822 3.481 Z M 222.315 3.481 L 226.037 3.481 L 257.7 83.532 L 253.978 83.532 L 222.315 3.481 Z M 183.16 83.532 L 209.65 16.437 L 211.632 20.884 L 186.882 83.532 L 183.16 83.532 Z M 190.653 83.532 L 213.517 25.621 L 215.354 30.407 L 194.423 83.532 L 190.653 83.532 Z M 198.145 83.532 L 217.191 35.192 L 219.028 40.075 L 201.867 83.532 L 198.145 83.532 Z M 233.337 73.961 L 207.717 73.961 L 209.07 70.48 L 231.886 70.48 L 233.337 73.961 Z M 230.63 67 L 210.424 67 L 211.777 63.52 L 229.131 63.52 L 230.63 67 Z M 227.826 60.039 L 213.131 60.039 L 214.532 56.559 L 226.424 56.559 L 227.826 60.039 Z"
          id="2"
          className="letter-path"
          vectorEffect="non-scaling-stroke"
        />
        <path
          d="M 301.931 8.17 L 272.154 83.532 L 268.383 83.532 L 300.046 3.481 L 303.816 3.481 L 335.43 83.532 L 331.708 83.532 L 301.931 8.17 Z M 326.246 3.481 L 357.908 83.532 L 354.138 83.532 L 322.524 3.481 L 326.246 3.481 Z M 307.538 3.481 L 311.26 3.481 L 342.923 83.532 L 339.153 83.532 L 307.538 3.481 Z M 315.031 3.481 L 318.753 3.481 L 350.416 83.532 L 346.694 83.532 L 315.031 3.481 Z M 275.876 83.532 L 302.366 16.437 L 304.348 20.884 L 279.598 83.532 L 275.876 83.532 Z M 283.368 83.532 L 306.233 25.621 L 308.07 30.407 L 287.139 83.532 L 283.368 83.532 Z M 290.861 83.532 L 309.907 35.192 L 311.744 40.075 L 294.583 83.532 L 290.861 83.532 Z M 326.052 73.961 L 300.432 73.961 L 301.786 70.48 L 324.602 70.48 L 326.052 73.961 Z M 323.345 67 L 303.139 67 L 304.493 63.52 L 321.847 63.52 L 323.345 67 Z M 320.542 60.039 L 305.846 60.039 L 307.248 56.559 L 319.14 56.559 L 320.542 60.039 Z"
          id="3"
          className="letter-path"
          vectorEffect="non-scaling-stroke"
        />
      </g>
    </svg>
  );
};

export default AnimatedTitle;
